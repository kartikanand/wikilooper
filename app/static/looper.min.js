function removeElementsfromList(){for(var a,b=document.getElementById("wiki-loop-list"),c=Array.prototype.slice.call(b.childNodes);a=c.pop();)b.removeChild(a)}function wikiLoop(a,b){if(1===a){if(running===!0)return;if(b=b||document.getElementById("wiki-form-search-box").value,""==b)return removeElementsfromList(),void addToList("Enter Something!");running=!0,hideAbout(),removeElementsfromList(),addToList(b),list=[b]}else{if("--ERROR1--"==b)return addToList("Not a valid Wiki Link"),void(running=!1);if("--ERROR2--"==b)return addToList("Error 2"),void(running=!1);if("--ERROR3--"==b)return addToList("Error 3"),void(running=!1);if("Philosophy"==b)return addToList("Philosophy"),addToList("STOP"),void(running=!1);if(list.indexOf(b)>-1)return addToList("Loop Found"),addToList("Between "+list[list.length-1]+" and "+b),void(running=!1);addToList(b),list[list.length]=b}var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&200===c.status&&wikiLoop(2,c.responseText)},c.open("GET","/loop?link="+b,!0),c.send(null)}function toggleAbout(){var a=document.getElementById("wiki-loop-about"),b=a.style.display;""==b?a.style.display="block":a.style.display=""}function hideAbout(){var a=document.getElementById("wiki-loop-about");a.style.display="none"}function removeClassActive(a){var b=Array.prototype.slice.call(a.childNodes);if(b.length>0){var c=b[b.length-1];c.className=c.className.replace("active","")}}function addToList(a){if(a){var b=document.getElementById("wiki-loop-list"),c=document.createElement("li"),d=document.createElement("a");removeClassActive(b),d.appendChild(document.createTextNode(a)),d.setAttribute("href","http://en.wikipedia.org/wiki/"+a),c.className="wiki-loop-list-item big-font active",c.appendChild(d),b.appendChild(c)}}var list=null,running=!1;